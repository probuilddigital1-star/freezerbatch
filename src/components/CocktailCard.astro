---
/**
 * Cocktail Card Component
 * Modern card design with hover effects
 */

export interface Props {
  slug: string;
  name: string;
  tagline: string;
  baseSpirit: string[];
  reliability: 'bulletproof' | 'needs-attention';
  finalAbv: number;
  freezeStatus: 'freeze' | 'slushy' | 'safe';
  servings: number;
}

const {
  slug,
  name,
  tagline,
  baseSpirit,
  reliability,
  finalAbv,
  freezeStatus,
  servings,
} = Astro.props;

const statusConfig = {
  safe: { label: 'Freezer Safe', class: 'badge-success', icon: '✓' },
  slushy: { label: 'Slushy', class: 'badge-warning', icon: '~' },
  freeze: { label: 'Will Freeze', class: 'badge-danger', icon: '!' }
};

const status = statusConfig[freezeStatus];
---

<a
  href={`/cocktails/${slug}`}
  class="group block card p-6 hover:-translate-y-1"
>
  <!-- Header -->
  <div class="flex items-start justify-between gap-4 mb-4">
    <div class="flex-1 min-w-0">
      <h3 class="font-display font-bold text-xl text-surface-900 group-hover:text-primary-600 transition-colors truncate">
        {name}
      </h3>
      <p class="text-sm text-surface-500 capitalize mt-0.5">{baseSpirit.join(' · ')}</p>
    </div>
    <span class={`badge ${status.class} shrink-0`}>
      {status.label}
    </span>
  </div>

  <!-- Tagline -->
  <p class="text-surface-600 text-sm mb-6 line-clamp-2">{tagline}</p>

  <!-- Stats Grid -->
  <div class="grid grid-cols-3 gap-3 mb-6">
    <div class="bg-surface-50 rounded-xl p-3 text-center">
      <span class="block font-mono font-bold text-lg text-surface-900">{finalAbv}%</span>
      <span class="text-2xs text-surface-500 uppercase tracking-wider">ABV</span>
    </div>
    <div class="bg-surface-50 rounded-xl p-3 text-center">
      <span class="block font-mono font-bold text-lg text-surface-900">{servings}</span>
      <span class="text-2xs text-surface-500 uppercase tracking-wider">Drinks</span>
    </div>
    <div class="bg-surface-50 rounded-xl p-3 text-center">
      <span class="block font-mono font-bold text-lg text-surface-900">750</span>
      <span class="text-2xs text-surface-500 uppercase tracking-wider">ml</span>
    </div>
  </div>

  <!-- Footer -->
  <div class="flex items-center justify-between pt-4 border-t border-surface-100">
    {reliability === 'bulletproof' ? (
      <span class="badge badge-primary">
        <svg class="w-3 h-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
          <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Bulletproof
      </span>
    ) : (
      <span class="badge badge-warning">
        Needs Attention
      </span>
    )}
    <span class="flex items-center gap-1 text-sm font-medium text-primary-600 group-hover:gap-2 transition-all">
      View Recipe
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </span>
  </div>
</a>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
