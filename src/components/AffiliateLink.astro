---
/**
 * Affiliate Link Component
 * Handles affiliate links with proper attributes and tracking
 */

export interface Props {
  asin: string;
  text: string;
  trackingId?: string;
  category?: 'spirit' | 'bar-tool' | 'glassware' | 'mixer' | 'garnish' | 'book';
  showIcon?: boolean;
  className?: string;
}

const {
  asin,
  text,
  trackingId = 'probuild20-20',
  category = 'bar-tool',
  showIcon = true,
  className = ''
} = Astro.props;

const url = `https://www.amazon.com/dp/${asin}?tag=${trackingId}`;

const categoryIcons: Record<string, string> = {
  'spirit': 'ğŸ¾',
  'bar-tool': 'ğŸ”§',
  'glassware': 'ğŸ¥ƒ',
  'mixer': 'ğŸ§ƒ',
  'garnish': 'ğŸŠ',
  'book': 'ğŸ“–'
};

const icon = categoryIcons[category] || 'ğŸ›’';
---

<a
  href={url}
  target="_blank"
  rel="noopener noreferrer sponsored nofollow"
  class:list={['affiliate-link inline-flex items-center gap-1', className]}
  data-affiliate="amazon"
  data-asin={asin}
>
  {showIcon && <span class="text-sm" aria-hidden="true">{icon}</span>}
  <span>{text}</span>
  <svg class="w-3 h-3 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
  </svg>
</a>
